'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (sails) {
  return {
    jobs: {},

    defaults: { cron: {} },

    initialize: function initialize(cb) {
      var _this = this;

      var config = sails.config.cron;
      var jobs = Object.keys(config);

      sails.on('ready', function () {
        jobs.forEach(function (job) {
          _this.jobs[job] = new _cron.CronJob(config[job].schedule, config[job].onTick, config[job].onComplete, typeof config[job].start === 'boolean' ? config[job].start : true, config[job].timezone, config[job].context);
        });
      });

      cb();
    }
  };
};

var _cron = require('cron');

module.exports = exports['default'];